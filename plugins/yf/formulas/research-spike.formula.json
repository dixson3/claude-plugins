{
  "name": "research-spike",
  "description": "Investigate a topic and synthesize findings into archivable research. Includes auto-archive step (E4).",
  "planning_safe": true,
  "vars": {
    "feature": { "required": true, "description": "Topic to research" },
    "context": { "required": false, "description": "Additional context or scope constraints" }
  },
  "steps": [
    {
      "id": "investigate",
      "title": "Investigate {{feature}}",
      "description": "Deep-dive into {{feature}}: scan the codebase, read documentation, identify patterns and integration points. SUBAGENT:Explore\n\nPost a FINDINGS: comment on the parent task with:\n- Purpose: What was investigated\n- Sources: Files, docs, and references found\n- Summary: Key findings\n- Recommendations: Suggested next steps",
      "needs": []
    },
    {
      "id": "synthesize",
      "title": "Synthesize findings on {{feature}}",
      "description": "Consolidate research findings into a structured summary. SUBAGENT:general-purpose\n\nPost a CHANGES: comment summarizing the synthesized output.",
      "needs": ["investigate"]
    },
    {
      "id": "archive",
      "title": "Archive research on {{feature}}",
      "description": "Create an archive entry from the research findings. SUBAGENT:general-purpose\n\nUse the task CLI to create an archive entry:\nbash \"$YFT\" create --type=archive --title=\"Archive: Research on {{feature}}\" -l ys:archive,ys:archive:research\n\nThis makes the research available for /yf:archive_process to generate permanent docs.",
      "needs": ["synthesize"]
    }
  ]
}
