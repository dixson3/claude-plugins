# Chronicler Plugin

Context persistence across Claude sessions using beads for storage and diary generation.

## Overview

Chronicler helps you maintain context across Claude sessions by:
- Capturing important context as "chronicle" beads
- Recalling context at session start
- Generating consolidated diary entries from chronicles
- Providing a rule that reminds you to capture context

## Dependencies

- **beads-cli** >= 0.44.0 - Git-backed issue tracker
- **workflows plugin** - For beads initialization

## Installation

```bash
/chronicler:init
```

This will:
1. Initialize beads in your project
2. Create `docs/diary/` directory
3. Install rules to `.claude/rules/`

## Skills

### `/chronicler:init`

Initialize chronicler in your project.

### `/chronicler:capture [topic:<topic>]`

Capture current context as a chronicle bead.

```bash
# Auto-detect topic
/chronicler:capture

# Specify topic
/chronicler:capture topic:feature
/chronicler:capture topic:bugfix
/chronicler:capture topic:planning
```

Topics: `feature`, `bugfix`, `refactor`, `docs`, `planning`, `research`

### `/chronicler:recall`

Recall and summarize open chronicle beads to restore context.

```bash
/chronicler:recall
```

Run this at session start to restore context from previous sessions.

### `/chronicler:diary`

Generate diary entries from open chronicles.

```bash
/chronicler:diary
```

This:
1. Groups related chronicles
2. Generates markdown diary entries in `docs/diary/`
3. Closes the processed chronicle beads

### `/chronicler:disable`

Close all open chronicles without generating diary entries.

```bash
/chronicler:disable
```

## Agents

### `chronicler_recall`

Context recovery agent that:
- Reads open chronicle beads
- Groups by topic/timeline
- Synthesizes a context summary

### `chronicler_diary`

Diary generation agent that:
- Groups chronicles by theme
- Generates consolidated diary entries
- Returns structured data for file creation

## Rule: watch-for-chronicle-worthiness

Installed to `.claude/rules/watch-for-chronicle-worthiness.md`

This rule monitors for chronicle-worthy events and suggests when to capture:
- Significant progress (features completed, bugs fixed)
- Important decisions (architecture, technology choices)
- Context switches (before breaks, task changes)
- Blockers or questions
- Session boundaries

The rule only **suggests** capture - it doesn't auto-capture.

## Chronicle Bead Format

Chronicles are stored as beads with labels:
- `ys:chronicle` - Always present
- `ys:topic:<topic>` - Optional topic classification

## Diary Entry Format

Diary entries are written to `docs/diary/YY-MM-DD.HH-MM.<topic>.md`:

```markdown
# Diary Entry: Title

**Date**: YYYY-MM-DD HH:MM
**Topics**: feature, planning
**Chronicle IDs**: abc123, def456

## Summary
Consolidated narrative...

## Decisions
- Key decisions...

## Next Steps
- [ ] Action items...

---
*Generated by chronicler from N chronicle beads*
```

## Workflow

### Daily Use

1. **Session Start**: `/chronicler:recall` (auto or manual)
2. **During Work**: Rule suggests capture at key moments
3. **Capture Context**: `/chronicler:capture` when suggested
4. **Before Push**: `/chronicler:diary` to generate entries
5. **Session End**: Context is preserved in beads

### Pre-Push Hook

The pre-push hook is configured automatically by `plugin.json` â€” no manual setup needed. It reminds you about open chronicles before pushing.

## Example Session

```
$ claude
> /chronicler:recall

Recalling context...
Found 2 open chronicles:
- abc123: Implementing auth flow (feature) - yesterday
- def456: API design decisions (planning) - 2 days ago

## Context Summary
### Recent Work
Working on authentication flow...

> [work on code...]

This seems chronicle-worthy - you've completed the login endpoint.
Consider running /chronicler:capture topic:feature

> /chronicler:capture topic:feature

Capturing context...
Created chronicle bead: ghi789

> [more work...]
> git push

CHRONICLER: Open chronicles detected
You have 3 open chronicle bead(s)...
Consider running /chronicler:diary

> /chronicler:diary

Generating diary entries...
Created: docs/diary/26-02-04.16-30.authentication.md
Closed 3 chronicle beads.
```

## License

MIT License - Yoshiko Studios LLC
