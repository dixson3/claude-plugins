# Diary Entry: v2.18.0 Release -- Swarm Integration, Aggressive Chronicles, Spec-Test Reconciliation, Capability Improvements, Coder Capability

**Date**: 2026-02-14 21:00
**Operator**: James Dixson
**Topics**: release, swarm, chronicles, specifications, testing, coder
**Chronicle IDs**: marketplace-b2g

## Summary

Plan 35 was the most ambitious single release we had attempted -- 32 tasks across 5 phase epics with 3 gates, touching 42 files and growing the test suite from 486 to 567 passing tests. James structured the work as five phases, each building on the previous, and we completed them all in one session.

We opened with Phase 1, establishing dual-track dispatch in the plan pump. The `plan_pump` skill was updated to distinguish formula-labeled beads from agent-labeled beads, routing formula tasks through `/yf:swarm_run` while agent tasks continue through bare Task dispatch. This was the integration point that connected the swarm infrastructure from v2.13.0 and v2.14.0 to the plan lifecycle that had been running since the early versions.

Phase 2 expanded the chronicler's trigger categories beyond the original set. We added three new categories -- implementation adjustments, swarm execution events, and plan compliance adjustments -- and introduced a `swarm-chronicle-bridge` rule that directly creates a chronicle bead when a reactive bugfix fires, not as an advisory suggestion but as a guaranteed capture.

Phase 3 tackled the gap between specification artifacts and the test suite. We built a traceability matrix in `test-coverage.md` cataloging 36 behaviorally tested items, 40 existence-only items, and 2 untested items, then added thirteen new behavioral tests across swarm, engineer, and archivist scenarios to close the most critical gaps. TODO items 019 through 022 were filed for remaining coverage work.

Phase 4 enhanced multiple subsystems with progressive chronicle capture and archive extraction in `swarm_dispatch`, broader swarm-archive bridging across all formula completions, and IG reference awareness for the Reviewer agent. Phase 5 introduced the coder capability -- four new agents (`yf_code_researcher`, `yf_code_writer`, `yf_code_tester`, `yf_code_reviewer`) orchestrated by a `code-implement` formula, with corresponding specification artifacts (REQ-032, DD-013, `IG/coder.md` with UC-029 through UC-032) and thirteen test cases. The heuristic formula selector was updated to distinguish `code-implement` from `feature-build` using technology and language context signals, routing specific coding work through the specialized agents.

## Decisions

- **Reuse existing swarm researcher for code research** -- the `code-implement` formula's research step uses `yf_swarm_researcher` rather than creating a dedicated code-specific researcher subagent type, since the existing agent already has the correct read-only tool profile
- **Formula selection distinguishes code-implement from feature-build** -- the heuristic uses technology and language context signals to route to code-implement when the task involves specific coding work versus feature-build for broader feature implementation
- **Progressive chronicle and archive are opt-in per step** -- to avoid noise in simple formulas, the Step 6c and 6d enhancements in swarm_dispatch only fire when the formula step definition opts in
- **Swarm-archive-bridge broadened to all formulas** -- previously scoped to research-spike only, the bridge now suggests archiving findings from any formula completion where archive-worthy markers are present

## Next Steps

- [ ] Test dual-track dispatch with a plan containing both formula and agent-labeled tasks
- [ ] Validate coder capability end-to-end with a real code-implement formula execution
- [ ] Address TODO-019 through TODO-025 for remaining spec-test coverage gaps

---
*Generated by chronicler from 1 chronicle bead*
