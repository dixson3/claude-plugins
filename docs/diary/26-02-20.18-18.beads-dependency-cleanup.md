# Diary Entry: Beads Dependency Cleanup â€” Plans 48 and 49

**Date**: 2026-02-20 18:18
**Topics**: beads, preflight, cleanup, planning
**Chronicle IDs**: yf-72m, yf-wpf

## Summary

Completed the final phase of beads dependency removal that began with Plan 47 (v2.25.0). Two small plans swept up the remaining artifacts.

**Plan 48** added proactive removal of `bd prime` Claude Code hooks from `.claude/settings.local.json`. The beads-cli tool installs `SessionStart` and `PreCompact` hooks via `bd setup claude`, but yf supersedes these with its own plugin-level hooks. When both are present, `bd prime` injects ~3k chars of redundant static documentation per session. Two scripts were updated: `plugin-preflight.sh` detects and removes the hooks before the fast-path check, and `beads-setup.sh` catches hooks auto-installed by `bd init` during Phase 1. A `.beads/.gitignore` entry was also added for `*.sqlite3` files to prevent beads database files from being tracked.

**Plan 49** removed the stale `yf_beads_installed()` alias from `yf-config.sh`. This backwards-compatible wrapper around `yf_bd_available` was retained during Plan 47 "to avoid breaking external references," but no external references exist. The alias was deleted and all callers (2 sites in `plugin-preflight.sh`), test scenarios (`unit-yf-config.yaml`, `unit-activation.yaml`), and `DEVELOPERS.md` were updated to use `yf_bd_available` directly. Plan 49 was dismissed (not lifecycle-managed) and implemented directly since no spec changes were needed.

## Decisions

- Used `bd setup claude --remove --project` for hook cleanup rather than manual jq editing -- delegates to bd's own removal command for idempotency and forward compatibility
- Dismissed Plan 49's gate since specs were already updated by Plan 47 (REQ-035, DD-016, FS-041 all reference `bd CLI` / `command -v bd`)
- Added `*.sqlite3` to `.beads/.gitignore` to prevent accidental commits of beads database files

## Next Steps

- [ ] Monitor for any additional beads naming artifacts that surface in future grep sweeps
- [ ] Consider a v2.26.0 release to bundle these cleanup plans

---
*Generated by chronicler from 2 chronicle beads*
