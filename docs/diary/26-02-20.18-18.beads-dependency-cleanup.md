# Diary Entry: Beads Dependency Cleanup â€” Plans 48 and 49

**Date**: 2026-02-20 18:18
**Operator**: James Dixson
**Topics**: beads, preflight, cleanup, planning
**Chronicle IDs**: yf-72m, yf-wpf

## Summary

This session completed the final phase of the beads dependency removal arc that began with Plan 47 back at v2.25.0. Two small plans swept up the remaining artifacts that had survived the earlier rounds of cleanup.

Plan 48 addressed the `bd prime` hook contamination we had identified earlier in the day. The beads-cli tool installs `SessionStart` and `PreCompact` hooks via `bd setup claude`, but yf supersedes these with its own plugin-level hooks. When both are present, `bd prime` injects roughly 3,000 characters of redundant static documentation per session -- pure token waste. We updated `plugin-preflight.sh` to detect and remove the hooks before the fast-path check, and `beads-setup.sh` to catch hooks auto-installed by `bd init` during Phase 1 initialization. We also added a `.beads/.gitignore` entry for `*.sqlite3` files to prevent beads database files from being tracked.

Plan 49 cleaned up a backwards-compatible alias that had outlived its purpose. During Plan 47, we had retained `yf_beads_installed()` as a wrapper around `yf_bd_available` "to avoid breaking external references," but a search confirmed no external references existed. We deleted the alias from `yf-config.sh` and updated all callers -- two sites in `plugin-preflight.sh`, the `unit-yf-config.yaml` and `unit-activation.yaml` test scenarios, and `DEVELOPERS.md` -- to use `yf_bd_available` directly. James agreed to dismiss the gate since the specs had already been updated by Plan 47, with REQ-035, DD-016, and FS-041 all referencing the `bd` CLI directly.

With these two small plans complete, the beads dependency cleanup arc was fully resolved.

## Decisions

- Used `bd setup claude --remove --project` for hook cleanup rather than manual jq editing -- delegates to bd's own removal command for idempotency and forward compatibility
- Dismissed Plan 49's gate since specs were already updated by Plan 47 (REQ-035, DD-016, FS-041 all reference `bd CLI` / `command -v bd`)
- Added `*.sqlite3` to `.beads/.gitignore` to prevent accidental commits of beads database files

## Next Steps

- [ ] Monitor for any additional beads naming artifacts that surface in future grep sweeps
- [ ] Consider a v2.26.0 release to bundle these cleanup plans

---
*Generated by chronicler from 2 chronicle beads*
