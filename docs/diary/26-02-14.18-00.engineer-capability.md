# Diary Entry: Engineer Capability v2.17.0 -- Specification Synthesis

**Date**: 2026-02-14 18:00
**Operator**: James Dixson
**Topics**: feature, planning, engineer, specifications
**Chronicle IDs**: marketplace-3tv, marketplace-e7e

## Summary

By this point the yf plugin had four major capabilities -- plan lifecycle, swarm execution, chronicler, and archivist -- but no formal way to maintain specification artifacts. James wanted to close that loop: plans should be checked against specifications, specs should evolve with the codebase, and drift between implementation and intent should be detectable. Plan 34 introduced the Engineer as the fifth major capability, and we completed all 26 tasks in a single session.

The capability adds automatic synthesis and maintenance of three specification artifact types: PRD (Product Requirements Document), EDD (Engineering Design Document), and Implementation Guides, along with a TODO register. We created four new skills to cover the lifecycle: `engineer_analyze_project` for initial project analysis by scanning plans, diary entries, and plugin artifacts; `engineer_update` for generating and updating spec documents; `engineer_reconcile` for detecting drift between specs and implementation; and `engineer_suggest_updates` for recommending spec refreshes after code changes. A single read-only agent, `yf_engineer_synthesizer`, handles all spec types following the established pattern where the agent returns JSON and the calling skill writes files.

Three new rules wired the Engineer into the existing lifecycle. The `engineer-reconcile-on-plan` rule triggers reconciliation during auto-chain (step 1.5, between plan save and beads creation), `watch-for-spec-drift` monitors for divergence during normal work, and `engineer-suggest-on-completion` recommends spec updates when plan execution finishes. We also extended the plan completion report with a Section 7 for specification status.

The implementation modified 14 existing files, added 3 new rules and 3 new artifact directories (`docs/specifications/`, `EDD/`, `IG/`) to the preflight manifest, and updated `code-gate.sh` to exempt `docs/specifications/*` from plan-gate restrictions. James chose advisory mode as the default for reconciliation -- configurable to blocking per-project, but spec drift warnings should not block execution out of the box. Seven new test cases brought the suite to 486 passing assertions at v2.17.0.

## Decisions

- **Advisory by default, configurable to blocking** -- reconciliation mode is controlled via `reconciliation_mode` in `.yoshiko-flow/config.json`, defaulting to advisory so spec drift warnings do not block execution
- **No specs means no enforcement** -- projects that do not generate specification artifacts pay zero overhead; the rules and reconciliation are no-ops without existing spec files
- **Single agent for all spec types** -- rather than separate agents per artifact type, one `yf_engineer_synthesizer` agent handles PRD, EDD, and IG synthesis using templates embedded in the skills
- **Synthesizer returns JSON, skill writes files** -- follows the same delegation pattern established by `archive_process`, keeping file I/O in the skill layer
- **Single watch rule for all spec drift** -- one rule (`watch-for-spec-drift`) monitors PRD, EDD, and IG divergence rather than having separate watchers per type

## Next Steps

- [ ] Verify reconciliation behavior on a project with existing specs

---
*Generated by chronicler from 2 chronicle beads*
