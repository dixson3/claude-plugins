# Diary Entry: Plan 45 -- Remove Legacy Beads-Sync Configuration

**Date**: 2026-02-17 23:45
**Topics**: beads-sync, dolt-backend, preflight, plan:45, cleanup
**Chronicle IDs**: yf-558, yf-4i9, yf-0r9

## Summary

Executed Plan 45 to remove three legacy mechanisms that became dead code after beads v0.52.0 introduced its embedded dolt backend where writes persist immediately.

The investigation identified three defunct mechanisms: (1) `bd sync`, which is explicitly a no-op in dolt mode ("Dolt persists writes immediately"), (2) the `beads-sync` git branch, which had not been updated since Feb 16 despite many commits and whose JSONL export pipeline was non-functional, and (3) `bd hooks install`, which set `core.hooksPath` to `.beads/hooks` where all 5 git hooks (`pre-commit`, `post-merge`, `pre-push`, `post-checkout`, `prepare-commit-msg`) exit 0 silently in dolt mode with `issues.jsonl` not even existing.

The yf plugin was still configuring all three in preflight, referencing them in rules, specs, and docs. The cleanup simplified the preflight setup command from `bd init && bd config set sync.branch beads-sync && bd config set sync.require_confirmation_on_mass_delete true && bd hooks install` down to just `bd init`. References to `bd sync` were removed from rules Section 4.1 (Quick Reference) and Section 4.2 (Landing the Plane), and from the `post-push-prune.sh` hook.

Specification entry DD-003 was rewritten from "Beads-Sync Branch Strategy" to "Dolt-Native Persistence (Reversed from Sync Branch)" to reflect the architectural reversal. Related spec entries were updated: TC-009, REQ-027, FS-027, UC-025, UC-027, UC-028, and TODO-008. The test suite was expanded from 9 to 12 cases with inverted assertions validating that sync references are absent rather than present.

Infrastructure cleanup deleted the `beads-sync` branch (both local and remote), unset `core.hooksPath` from git config, removed the JSONL merge driver from `.gitattributes`, and removed the `sync-branch` entry from `.beads/config.yaml`. The plan started with 10 ready beads and completed with all 742 tests passing and spec sanity checks at 6/6. The plugin version was bumped to v2.22.0.

## Decisions

- The `bd hooks install` mechanism was removed entirely rather than kept as optional, because all 5 hooks are silent no-ops in dolt mode and `issues.jsonl` does not exist -- there is no JSONL export story to preserve.
- DD-003 was rewritten (not deleted) to document the architectural reversal from sync-branch to dolt-native persistence, preserving the decision history of how the system evolved.
- The `beads-sync` branch was deleted from both local and remote to prevent confusion, since its data was stale and the mechanism is permanently superseded.

## Next Steps

- [ ] Monitor for any downstream references to `bd sync` or `beads-sync` in operator workflows or documentation outside this repository
- [ ] Confirm dolt-native persistence (`bd vc commit/status/merge`) works correctly across multi-agent swarm sessions without the old sync fallback

---
*Generated by chronicler from 3 chronicle beads*
