# Diary Entry: Plan 45 -- Remove Legacy Beads-Sync Configuration

**Date**: 2026-02-17 23:45
**Operator**: James Dixson
**Topics**: beads-sync, dolt-backend, preflight, plan:45, cleanup
**Chronicle IDs**: yf-558, yf-4i9, yf-0r9

## Summary

When beads v0.52.0 introduced its embedded dolt backend, writes began persisting immediately -- rendering several older synchronization mechanisms dead code. We had been carrying three defunct pieces forward out of inertia: the `bd sync` command (explicitly a no-op in dolt mode), the `beads-sync` git branch (stale since February 16 with a non-functional JSONL export pipeline), and `bd hooks install` (which set `core.hooksPath` to `.beads/hooks` where all five git hooks silently exit 0 in dolt mode). Plan 45 swept all three out of the codebase.

The yf plugin was still configuring all three in preflight, referencing them in rules, specs, and docs. We simplified the preflight setup command from a four-part chain (`bd init && bd config set sync.branch beads-sync && bd config set sync.require_confirmation_on_mass_delete true && bd hooks install`) down to just `bd init`. References to `bd sync` were pulled from rules Section 4.1 and Section 4.2, and from the `post-push-prune.sh` hook.

On the specification side, we rewrote DD-003 from "Beads-Sync Branch Strategy" to "Dolt-Native Persistence (Reversed from Sync Branch)" to document the architectural reversal rather than simply deleting the decision record. Related entries TC-009, REQ-027, FS-027, UC-025, UC-027, UC-028, and TODO-008 were all updated to reflect the new reality. The test suite grew from 9 to 12 cases with inverted assertions validating that sync references are absent rather than present.

Infrastructure cleanup went beyond the plugin code. We deleted the `beads-sync` branch from both local and remote, unset `core.hooksPath` from git config, removed the JSONL merge driver from `.gitattributes`, and cleared the `sync-branch` entry from `.beads/config.yaml`. All 742 tests passed in the final run, and we bumped the plugin version to v2.22.0. It felt good to finally shed the weight of a synchronization model that no longer had anything to synchronize.

## Decisions

- The `bd hooks install` mechanism was removed entirely rather than kept as optional, because all 5 hooks are silent no-ops in dolt mode and `issues.jsonl` does not exist -- there is no JSONL export story to preserve.
- DD-003 was rewritten (not deleted) to document the architectural reversal from sync-branch to dolt-native persistence, preserving the decision history of how the system evolved.
- The `beads-sync` branch was deleted from both local and remote to prevent confusion, since its data was stale and the mechanism is permanently superseded.

## Next Steps

- [ ] Monitor for any downstream references to `bd sync` or `beads-sync` in operator workflows or documentation outside this repository
- [ ] Confirm dolt-native persistence (`bd vc commit/status/merge`) works correctly across multi-agent swarm sessions without the old sync fallback

---
*Generated by chronicler from 3 chronicle beads*
