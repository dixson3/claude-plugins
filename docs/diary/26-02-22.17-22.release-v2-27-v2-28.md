# Diary Entry: v2.27.0 and v2.28.0 Releases

**Date**: 2026-02-22
**Topics**: release, infrastructure, prompt-quality, worktree, swarm
**Chronicle IDs**: yf-8al, yf-bk6, yf-fug

## Summary

Two major releases landed in rapid succession, covering infrastructure hardening and prompt quality improvements.

**v2.27.0 -- Hash-Based IDs, Worktree Lifecycle, and Swarm Isolation.** Replaced sequential bead ID generation with hash-based generation (base36, 5-char) via `plugins/yf/scripts/yf-id.sh` to eliminate ID collision risk across parallel worktrees. Introduced epic worktree lifecycle skills (`/yf:worktree_create`, `/yf:worktree_land`) backed by `plugins/yf/scripts/worktree-ops.sh`, and enabled swarm write-agents to run in isolated worktrees with automatic merge-back and conflict resolution via `plugins/yf/scripts/swarm-worktree.sh`. Added worktree lifecycle rule (Rule 1.6) and config accessor layer in `plugins/yf/scripts/yf-config.sh`. Updated `exit-plan-gate.sh`, `spec-sanity-check.sh`, and `tracker-api.sh` for hash-based IDs. Also archived a research spike on worktree concurrency and ID collision in `docs/research/`.

**v2.28.0 -- Rules Consolidation, Agent/Skill Text Optimization, and Prompt Quality Rule.** Merged `yf-worktree-lifecycle.md` into `plugins/yf/rules/yf-rules.md` as section 1.6 and tightened advisory monitoring sections. Compressed all 12 agents (~30% token reduction) by removing Personality sections and compressing Tools/Error Handling/Chronicle blocks. Performed deep optimization on the top 6 skills and light-pass on the remaining 33 (~18% total reduction). Added a Prompt Text Quality review rule to `CLAUDE.md`. Created `plugins/yf/agents/yf_regression_check.md` for regression checking. The plan document is at `docs/plans/plan-5e3qn.md`.

## Decisions

- **Hash-based over sequential IDs**: Base36 5-character hashes eliminate collision risk in parallel worktree environments without requiring coordination between agents.
- **Worktree lifecycle as skills (not raw git)**: Wrapping git worktree operations in skills (`worktree_create`, `worktree_land`) ensures beads redirect, validation, rebasing, and cleanup happen atomically.
- **30% agent compression**: Removing non-behavioral prose (Personality, motivational framing) from agents reduces token overhead without changing agent behavior.
- **Prompt quality as a CLAUDE.md rule**: Embedding the review checklist at the project level ensures all future agent/skill edits are reviewed for concision before commit.

---
*Generated by chronicler from 3 chronicle beads*
