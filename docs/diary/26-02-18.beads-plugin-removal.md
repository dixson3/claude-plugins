# Diary Entry: Plan 42 -- Remove Beads Plugin Dependency

**Date**: 2026-02-18
**Operator**: James Dixson
**Topics**: beads-plugin, activation-gate, dependency-removal, plan:42, cleanup
**Chronicle IDs**: yf-at9, yf-g6b

## Summary

Plan 42 was the capstone of a multi-session decoupling arc that began with Plan 42 and progressively removed yf's dependency on the `steveyegge/beads` Claude Code plugin. By this point, every yf script and hook had already migrated to calling `bd` directly -- the plugin dependency was purely vestigial, surviving only because Plan 42's activation gate check (`yf_beads_installed()`) inspected `~/.claude/plugins/installed_plugins.json` to confirm the plugin was present.

We replaced that inspection with `yf_bd_available()`, a straightforward `command -v bd` check that decouples yf from Claude Code's plugin installation internals entirely. The old function name was retained as a backwards-compatible alias. The `dependencies` array was removed from `preflight.json`, eliminating the plugin registry dependency. Rule 1.0 was simplified from "beads plugin installed" to "bd CLI available," and DD-016 (hybrid beads routing through plugin skills) was marked as reversed since all operations now flow through the CLI.

With the plugin dependency gone, we cleaned up stale `.beads/` artifacts that had been lingering from the pre-dolt era: five git hooks in `.beads/hooks/`, along with `issues.jsonl`, `metadata.json`, and `README.md`. All were tracked no-ops. We updated `.beads/.gitignore` with patterns to prevent their return.

The draft chronicle (yf-g6b) captured auto-detected changes to `.beads/hooks/` and related files spanning the Plans 42-46 window. That activity -- activation gate implementation, chronicle worthiness improvements, legacy beads-sync removal, and session close enforcement -- was already recorded in prior diary entries. The significant finding was that those stale hook files had persisted through all of it, and Plan 42 was what finally swept them away.

In total, 30 files were updated across scripts, rules, docs, specs, and tests. All 781 tests passed. We bumped the plugin version from 2.23.0 to 2.24.0, marking the completion of the Plans 42-46 dependency decoupling arc.

## Decisions

- The activation gate check was changed from plugin registry inspection (`installed_plugins.json`) to `command -v bd`, decoupling yf from Claude Code's plugin installation internals entirely.
- `yf_beads_installed()` was retained as a backwards-compatible alias for `yf_bd_available()` rather than being removed, to avoid breaking any external references.
- DD-016 (hybrid beads routing) was reversed rather than deleted, preserving the architectural decision history of why the plugin dependency existed and why it was removed.
- The stale `.beads/` hooks and metadata files were removed from git tracking and added to `.gitignore` rather than leaving them as inert tracked files, keeping the repository clean.

## Next Steps

- [ ] Verify that new installations of yf work correctly with only `bd` CLI present and no beads plugin installed
- [ ] Update any external documentation or onboarding guides that reference the beads plugin as a prerequisite
- [ ] Consider whether the `.beads/` directory itself can be fully gitignored now that all tracked artifacts have been removed

---
*Generated by chronicler from 2 chronicle entries*
