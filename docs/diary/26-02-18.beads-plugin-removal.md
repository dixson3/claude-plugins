# Diary Entry: Plan 47 -- Remove Beads Plugin Dependency

**Date**: 2026-02-18
**Topics**: beads-plugin, activation-gate, dependency-removal, plan:47, cleanup
**Chronicle IDs**: yf-at9, yf-g6b

## Summary

Executed Plan 47 to remove the `steveyegge/beads` Claude Code plugin as a runtime dependency of yf. This was the final step in a multi-session arc (Plans 42-47) that progressively decoupled yf from the beads plugin in favor of direct `bd` CLI usage.

The beads plugin originally provided Claude Code skills for bead operations, but all yf scripts and hooks had already migrated to calling `bd` directly. The plugin dependency was vestigial -- it served only as an activation gate check (Plan 42 introduced `yf_beads_installed()` which inspected `~/.claude/plugins/installed_plugins.json`). Plan 47 replaced this with `yf_bd_available()`, a simple `command -v bd` check, and retained the old function name as a backwards-compatible alias.

The `dependencies` array was removed from `preflight.json`, eliminating the Claude Code plugin registry dependency entirely. The activation gate (Rule 1.0) was simplified from "beads plugin installed" to "bd CLI available". DD-016 (hybrid beads routing -- agent operations through beads plugin skills) was marked as reversed, since all operations now go through the CLI directly.

Stale `.beads/` artifacts were cleaned up: five git hooks (`post-checkout`, `post-merge`, `pre-commit`, `pre-push`, `prepare-commit-msg`), `issues.jsonl`, `metadata.json`, and `README.md` were removed. These were all no-ops inherited from the pre-dolt era. The `.beads/.gitignore` was updated with patterns to prevent their return.

The draft chronicle (yf-g6b) captured auto-detected changes to `.beads/hooks/` and related files from the Plans 42-46 window. That activity -- activation gate implementation (Plan 42), chronicle worthiness (Plans 42-44), legacy beads-sync removal (Plan 45), and session close enforcement (Plan 46) -- was already recorded in prior diary entries. The significant file changes flagged by the draft were the stale `.beads/hooks/` files that Plan 47 subsequently removed.

In total, 30 files were updated across scripts, rules, docs, specs, and tests. All 781 tests passed. The plugin version was bumped from 2.23.0 to 2.24.0.

## Decisions

- The activation gate check was changed from plugin registry inspection (`installed_plugins.json`) to `command -v bd`, decoupling yf from Claude Code's plugin installation internals entirely.
- `yf_beads_installed()` was retained as a backwards-compatible alias for `yf_bd_available()` rather than being removed, to avoid breaking any external references.
- DD-016 (hybrid beads routing) was reversed rather than deleted, preserving the architectural decision history of why the plugin dependency existed and why it was removed.
- The stale `.beads/` hooks and metadata files were removed from git tracking and added to `.gitignore` rather than leaving them as inert tracked files, keeping the repository clean.

## Next Steps

- [ ] Verify that new installations of yf work correctly with only `bd` CLI present and no beads plugin installed
- [ ] Update any external documentation or onboarding guides that reference the beads plugin as a prerequisite
- [ ] Consider whether the `.beads/` directory itself can be fully gitignored now that all tracked artifacts have been removed

---
*Generated by chronicler from 2 chronicle beads*
